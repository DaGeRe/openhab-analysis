/**                                                                                                    /**                                                                                                 
* Converts a {@link Command} to a ZigBee temperature integer                                           * Converts a {@link Command} to a ZigBee temperature integer                                        
*                                                                                                      *                                                                                                   
* @param command the {@link Command} to convert                                                        * @param command the {@link Command} to convert                                                     
* @return the {@link Command} or null if the conversion was not possible                               * @return the {@link Command} or null if the conversion was not possible                            
*/                                                                                                     */                                                                                                  
protected Integer temperatureToValue(Command command) {                                                protected Integer temperatureToValue(Command command) {                                             
BigDecimal value = null;                                                                               BigDecimal value = null;                                                                            
if (command instanceof QuantityType) {                                                                 if (command instanceof QuantityType) {                                                              
QuantityType&lt;?&gt; quantity = (QuantityType&lt;?&gt;) command;                                      QuantityType&lt;?&gt; quantity = (QuantityType&lt;?&gt;) command;                                   
if (quantity.getUnit() == SIUnits.CELSIUS) {                                                           if (quantity.getUnit() == SIUnits.CELSIUS) {                                                        
value = quantity.toBigDecimal();                                                                       value = quantity.toBigDecimal();                                                                    
} else if (quantity.getUnit() == ImperialUnits.FAHRENHEIT) {                                           } else if (quantity.getUnit() == ImperialUnits.FAHRENHEIT) {                                        
QuantityType&lt;?&gt; celsius = quantity.toUnit(SIUnits.CELSIUS);                                      QuantityType&lt;?&gt; celsius = quantity.toUnit(SIUnits.CELSIUS);                                   
if (celsius == null) {                                                                                 if (celsius == null) {                                                                              
return null;                                                                                           return null;                                                                                        
}                                                                                                      }                                                                                                   
value = celsius.toBigDecimal();                                                                        value = celsius.toBigDecimal();                                                                     
} else {                                                                                               } else {                                                                                            
return null;                                                                                           return null;                                                                                        
}                                                                                                      }                                                                                                   
} else if (command instanceof Number) {                                                                } else if (command instanceof Number) {                                                             
// No scale, so assumed to be Celsius                                                                  // No scale, so assumed to be Celsius                                                               
value = BigDecimal.valueOf(((Number) command).doubleValue());                                          value = BigDecimal.valueOf(((Number) command).doubleValue());                                       
                                                                                                     | } else {                                                                                            
                                                                                                     | return 0;                                                                                           
}                                                                                                      }                                                                                                   
return value.setScale(2, RoundingMode.CEILING).multiply(TEMPERATURE_MULTIPLIER).intValue();            return value.setScale(2, RoundingMode.CEILING).multiply(TEMPERATURE_MULTIPLIER).intValue();         
}                                                                                                      }                                                                                                   
