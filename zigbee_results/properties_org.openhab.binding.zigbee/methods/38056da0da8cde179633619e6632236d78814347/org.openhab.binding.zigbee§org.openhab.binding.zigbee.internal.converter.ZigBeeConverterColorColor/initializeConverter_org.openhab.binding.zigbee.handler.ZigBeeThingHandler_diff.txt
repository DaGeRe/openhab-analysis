@Override                                                                                              @Override                                                                                           
public boolean initializeConverter(ZigBeeThingHandler thing) {                                         public boolean initializeConverter(ZigBeeThingHandler thing) {                                      
super.initializeConverter(thing);                                                                      super.initializeConverter(thing);                                                                   
colorUpdateScheduler = Executors.newSingleThreadScheduledExecutor();                                   colorUpdateScheduler = Executors.newSingleThreadScheduledExecutor();                                
clusterColorControl = (ZclColorControlCluster) endpoint.getInputCluster(ZclColorControlCluster.CLUST   clusterColorControl = (ZclColorControlCluster) endpoint.getInputCluster(ZclColorControlCluster.CLUST
if (clusterColorControl == null) {                                                                     if (clusterColorControl == null) {                                                                  
logger.error("{}: Error opening device color controls", endpoint.getIeeeAddress());                    logger.error("{}: Error opening device color controls", endpoint.getIeeeAddress());                 
return false;                                                                                          return false;                                                                                       
}                                                                                                      }                                                                                                   
configOptions = new ArrayList&lt;&gt;();                                                               configOptions = new ArrayList&lt;&gt;();                                                            
clusterLevelControl = (ZclLevelControlCluster) endpoint.getInputCluster(ZclLevelControlCluster.CLUST   clusterLevelControl = (ZclLevelControlCluster) endpoint.getInputCluster(ZclLevelControlCluster.CLUST
if (clusterLevelControl == null) {                                                                     if (clusterLevelControl == null) {                                                                  
logger.warn("{}: Device does not support level control", endpoint.getIeeeAddress());                   logger.warn("{}: Device does not support level control", endpoint.getIeeeAddress());                
} else {                                                                                               } else {                                                                                            
configLevelControl = new ZclLevelControlConfig();                                                      configLevelControl = new ZclLevelControlConfig();                                                   
configLevelControl.initialize(clusterLevelControl);                                                    configLevelControl.initialize(clusterLevelControl);                                                 
configOptions.addAll(configLevelControl.getConfiguration());                                           configOptions.addAll(configLevelControl.getConfiguration());                                        
}                                                                                                      }                                                                                                   
clusterOnOff = (ZclOnOffCluster) endpoint.getInputCluster(ZclOnOffCluster.CLUSTER_ID);                 clusterOnOff = (ZclOnOffCluster) endpoint.getInputCluster(ZclOnOffCluster.CLUSTER_ID);              
if (clusterOnOff == null) {                                                                            if (clusterOnOff == null) {                                                                         
logger.debug("{}: Device does not support on/off control", endpoint.getIeeeAddress());                 logger.debug("{}: Device does not support on/off control", endpoint.getIeeeAddress());              
} else {                                                                                               } else {                                                                                            
configOnOffSwitch = new ZclOnOffSwitchConfig();                                                        configOnOffSwitch = new ZclOnOffSwitchConfig();                                                     
configOnOffSwitch.initialize(clusterOnOff);                                                            configOnOffSwitch.initialize(clusterOnOff);                                                         
configOptions.addAll(configOnOffSwitch.getConfiguration());                                            configOptions.addAll(configOnOffSwitch.getConfiguration());                                         
}                                                                                                      }                                                                                                   
// Create a configuration handler and get the available options                                        // Create a configuration handler and get the available options                                     
configColorControl = new ZclColorControlConfig(channel);                                               configColorControl = new ZclColorControlConfig(channel);                                            
configColorControl.initialize(clusterColorControl);                                                    configColorControl.initialize(clusterColorControl);                                                 
configOptions.addAll(configColorControl.getConfiguration());                                           configOptions.addAll(configColorControl.getConfiguration());                                        
if (!discoverSupportedColorCommands(clusterColorControl)) {                                          | discoverSupportedColorCommands(clusterColorControl);                                                
return false;                                                                                        |                                                                                                     
}                                                                                                    |                                                                                                     
clusterColorControl.addAttributeListener(this);                                                        clusterColorControl.addAttributeListener(this);                                                     
clusterLevelControl.addAttributeListener(this);                                                        clusterLevelControl.addAttributeListener(this);                                                     
clusterOnOff.addAttributeListener(this);                                                               clusterOnOff.addAttributeListener(this);                                                            
return true;                                                                                           return true;                                                                                        
}                                                                                                      }                                                                                                   
