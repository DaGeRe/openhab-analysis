private boolean discoverSupportedColorCommands(ZclColorControlCluster serverClusterColorControl) {   | /**                                                                                                 
                                                                                                     | * Discover which commands to use. Default to HUE/SAT if unsure                                      
                                                                                                     | *                                                                                                   
                                                                                                     | * @param serverClusterColorControl the {@link ZclColorControlCluster} to use for discovery          
                                                                                                     | */                                                                                                  
                                                                                                     | private void discoverSupportedColorCommands(ZclColorControlCluster serverClusterColorControl) {     
// If the configuration is not set to AUTO, then we can override the control method                    // If the configuration is not set to AUTO, then we can override the control method                 
if (configColorControl != null && configColorControl.getControlMethod() != ControlMethod.AUTO) {       if (configColorControl != null && configColorControl.getControlMethod() != ControlMethod.AUTO) {    
supportsHue = configColorControl.getControlMethod() == ControlMethod.HUE;                              supportsHue = configColorControl.getControlMethod() == ControlMethod.HUE;                           
return true;                                                                                         |                                                                                                     
}                                                                                                      }                                                                                                   
// Discover whether the device supports HUE/SAT or XY color set of commands                            // Discover whether the device supports HUE/SAT or XY color set of commands                         
try {                                                                                                  try {                                                                                               
if (!serverClusterColorControl.discoverAttributes(false).get()) {                                      if (!serverClusterColorControl.discoverAttributes(false).get()) {                                   
logger.warn("{}: Cannot determine whether device supports RGB color. Assuming it supports HUE/SAT",    logger.warn("{}: Cannot determine whether device supports RGB color. Assuming it supports HUE/SAT", 
supportsHue = true;                                                                                    supportsHue = true;                                                                                 
} else if (serverClusterColorControl.getSupportedAttributes().contains(ZclColorControlCluster.ATTR_C   } else if (serverClusterColorControl.getSupportedAttributes().contains(ZclColorControlCluster.ATTR_C
logger.debug("{}: Device supports Hue/Saturation color set of commands", endpoint.getIeeeAddress());   logger.debug("{}: Device supports Hue/Saturation color set of commands", endpoint.getIeeeAddress());
supportsHue = true;                                                                                    supportsHue = true;                                                                                 
} else if (serverClusterColorControl.getSupportedAttributes().contains(ZclColorControlCluster.ATTR_C   } else if (serverClusterColorControl.getSupportedAttributes().contains(ZclColorControlCluster.ATTR_C
logger.debug("{}: Device supports XY color set of commands", endpoint.getIeeeAddress());               logger.debug("{}: Device supports XY color set of commands", endpoint.getIeeeAddress());            
supportsHue = false;                                                                                   supportsHue = false;                                                                                
// For now, only for XY lights till this is configurable                                               // For now, only for XY lights till this is configurable                                            
delayedColorChange = true;                                                                             delayedColorChange = true;                                                                          
} else {                                                                                               } else {                                                                                            
logger.warn("{}: Device supports neither RGB color nor XY color", endpoint.getIeeeAddress());          logger.warn("{}: Device supports neither RGB color nor XY color", endpoint.getIeeeAddress());       
pollingPeriod = POLLING_PERIOD_HIGH;                                                                   pollingPeriod = POLLING_PERIOD_HIGH;                                                                
return false;                                                                                        | // Default                                                                                          
                                                                                                     | supportsHue = true;                                                                                 
}                                                                                                      }                                                                                                   
} catch (InterruptedException | ExecutionException e) {                                                } catch (InterruptedException | ExecutionException e) {                                             
logger.warn("{}: Exception checking whether device endpoint supports RGB color. Assuming it supports   logger.warn("{}: Exception checking whether device endpoint supports RGB color. Assuming it supports
supportsHue = true;                                                                                    supportsHue = true;                                                                                 
}                                                                                                      }                                                                                                   
return true;                                                                                         |                                                                                                     
}                                                                                                      }                                                                                                   
